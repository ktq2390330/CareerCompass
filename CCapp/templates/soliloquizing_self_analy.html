<!-- soliloquizing_base.htmlを継承 -->
{% extends "soliloquizing_base.html" %}

<!-- staticタグを使うために追加 -->
{% load static %}

<!-- タイトル -->
{% block title %}soliloquizing_self_analy{% endblock %}

<!-- 埋め込む用のcssを読み込む -->
{% block head2 %}
    {% comment %} <link href="{% static 'css/soliloquizing.css' %}" rel="stylesheet"> {% endcomment %}
{% endblock %}

<!-- soliloquizing_base.htmlにぶち込む部分 -->
{% block soliloquizing %}

    {% if question_title %}
        <h2>{{ question_title.name }}</h2> <!-- タイトルを表示 -->
    {% endif %}

    {% for self_analy in self_analy_list %}
        <label for="question{{ forloop.counter }}" style="display: block; text-align: left;">Q{{ forloop.counter }}: {{ self_analy.name }}</label>
        <textarea id="question{{ forloop.counter }}" name="question{{ forloop.counter }}" class="question-input"></textarea><br>
    {% endfor %}


{% endblock %}

<script>

    document.addEventListener('DOMContentLoaded', function() {
        const textarea = document.getElementById('question{{ forloop.counter }}');
        
        // 高さを自動調整する関数
        const adjustHeight = (element) => {
            element.style.height = 'auto'; // 初期化
            element.style.height = element.scrollHeight + 'px'; // 必要な高さにリサイズ
        };
    
        // ページ読み込み時に初期サイズを設定
        adjustHeight(textarea);
    
        // 入力イベントごとに高さを調整
        textarea.addEventListener('input', function() {
            adjustHeight(this);
        });
    });
    

</script>