<!-- base.htmlを継承 -->
{% extends "adm_base.html" %}

<!-- staticタグを使うために追加 -->
{% load static %}

<!-- top page用のタイトル -->
{% block title %}[adm]求人検索{% endblock %}

<!-- top page用のcssを読み込む -->
{% block head %}
    <link href="{% static 'css/adm_post_list.css' %}" rel="stylesheet">
{% endblock %}

<!-- base.htmlにぶち込む部分 -->
{% block content %}
    <!-- search-box -->
    <div class="container">
        <div class="search-field">
            <!-- 検索バー-->
            <form action="" method="GET">
                <input type="text" name="query" placeholder="法人番号または企業名を入力" value="{{ request.GET.query }}">
                <button type="submit">検索</button>
            </form>
        </div>
    </div>

    <!-- 求人リスト -->
    <div class="job-list">
        {% if offers %}
            <!-- 求人情報をループで表示 -->
            {% for offer in offers %}
            <div class="job-item">
                <div class="job-info">
                    <p><strong>企業名:</strong> {{ offer.corporation.name }}</p>
                    <p><strong>法人番号:</strong> {{ offer.corporation.corp }}</p>
                    <div class="job-buttons">
                        <form action="{% url 'delete_offer' offer.pk %}" method="post" onsubmit="return confirm('本当に削除しますか？');">
                            {% csrf_token %}
                            <button type="submit">削除</button>
                        </form>
                        </div>
                        <a href="">
                            <button type="button">求人編集</button>
                        </a>
                    </div>                    
                </div>
            </div>
            {% empty %}
            <!-- 検索結果がない場合の表示 -->
            <p class="no-results">求人情報が見つかりませんでした。</p>
            {% endfor %}
        {% else %}
            <!-- 検索結果がない場合の表示 -->
            <p class="no-results">求人情報が見つかりませんでした。</p>
        {% endif %}
    </div>
{% endblock %}